<% 
	context_menu = [
		{
			:key => :cancel, 
			:name => 'Cancel my account', 
			:url => registration_path(resource_name),
			:options => {
				:method => :delete,
				:link => { :data => { :confirm => "Are you sure?" } },
				:container_class => 'menu',
				:class => "text"
			}
		},
		{
			:key => :back, 
			:name => 'Back', 
			:url => url_for(:back),
			:options => {
				:unless => Proc.new { url_for(:back) == "javascript:history.back()" },
				:container_class => 'menu',
				:class => "text"
			}
		},
		{
			:key => :home, 
			:name => 'Goto home', 
			:url => root_url,
			:options => {
				:if => Proc.new { url_for(:back) == "javascript:history.back()" },
				:container_class => 'menu',
				:class => "text"
			}
		}]
	menu = nil
	content_for(:context_menu) { menu = render_navigation :items => context_menu }
%>
<% content_for(:title) { "Edit Profile" } %>
<h2>Edit <%= resource_name.to_s.humanize %></h2>

<%= semantic_form_for(resource, :as => resource_name, :url => registration_path(resource_name), :html => { :method => :put }) do |f| %>
  <%= devise_error_messages! %>

  <%= f.inputs do %>
	<%= f.input :email, as: :email %>
  	<%= f.input :password, as: :password %>
  	<%= f.input :password_confirmation, as: :password %>
  	<%= f.input :current_password, as: :password, :hint => "(we need your current password to confirm your changes)" %>
  <% end %>


  <%= f.actions do %>
  	<%= f.action :submit, :as => :button, :label => "Update" %>	
  <% end%>
<% end %>
<div class="menu">
	<%= menu %>
</div>